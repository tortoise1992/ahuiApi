{"version":3,"sources":["common/components/NoData/NoDataComponent.js","common/components/NoData/NoData.png","common/components/D3/PeopleRelation.js","pages/dashboard/relation/index.js","common/components/D3/img/boy.png","common/components/D3/img/girl.png","common/components/D3/img/male.png","common/components/D3/img/female.png"],"names":["NoDataComponent","react__WEBPACK_IMPORTED_MODULE_11___default","a","createElement","antd_lib_row__WEBPACK_IMPORTED_MODULE_1___default","className","style","height","this","props","data","antd_lib_col__WEBPACK_IMPORTED_MODULE_5___default","span","src","noDataImg","alt","antd_lib_spin__WEBPACK_IMPORTED_MODULE_3___default","size","Component","module","exports","d3","window","PeopleRelation","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","initData","relationInfo","nodes","edges","newNodes","forEach","unit","role","image","boy","push","girl","male","female","setRelationshipUI","showWith","width","document","getElementById","clientWidth","relationsId","state","svg","select","append","attr","force","layout","links","linkDistance","charge","start","edges_line","selectAll","enter","edges_text","text","d","relation","nodes_img","i","drag","nodes_text","name","on","x","img_w","y","img_h","source","target","nextProps","_this2","isObjectValueEqual","setTimeout","nextState","length","_react_16_6_3_react_default","backgroundColor","id","Relation","breadcrumb_default","Item","card_default","title","D3_PeopleRelation","__webpack_require__","p"],"mappings":"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","file":"static/js/6.af35f7f1.chunk.js","sourcesContent":["import React, {Component} from 'react';\r\nimport {Row, Col, Spin} from 'antd';\r\n\r\nimport noDataImg from './NoData.png';\r\nimport './noData.less';\r\n\r\n/**\r\n * data  无值时显示加载动画，设置为'nodata'时显示暂无数据\r\n * height  设置组件高度, 默认height为100%\r\n */\r\nclass NoDataComponent extends Component {\r\n\r\n    render() {\r\n        return (\r\n            <Row className={\"no-data-con\"} style={{height: this.props.height ? this.props.height : '100%'}}>\r\n                {this.props.data === 'nodata' ? <Col span={24} className={\"no-data\"}><img src={noDataImg} alt=\"nodata\"/></Col> :\r\n                    <Spin size=\"large\"/>}\r\n            </Row>\r\n        );\r\n    }\r\n}\r\n\r\nexport default NoDataComponent;\r\n\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJIAAAA0CAYAAABhPmF9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjZERDJBNjVBNUU1NTExRTg5MkJCOTMzRjQwM0I5RjQ0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjZERDJBNjVCNUU1NTExRTg5MkJCOTMzRjQwM0I5RjQ0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NkREMkE2NTg1RTU1MTFFODkyQkI5MzNGNDAzQjlGNDQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NkREMkE2NTk1RTU1MTFFODkyQkI5MzNGNDAzQjlGNDQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5v1DDkAAAMrUlEQVR42uxd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\"","import React, {Component} from 'react';\r\nimport boy from './img/boy.png';\r\nimport girl from './img/girl.png';\r\nimport male from './img/male.png';\r\nimport female from './img/female.png';\r\nimport NoData from '../NoData/NoDataComponent'; //暂无数据组件\r\nimport { isObjectValueEqual } from '../../../utils'\r\n\r\nconst d3 = window.d3;\r\n/**\r\n * 可接收参数\r\n * data  数据 格式为 { \r\n *                      nodes: [{ \"image\": \"\", \"role\": \"female\", \"name\": \"吴智蕾\" }], \r\n *                      edges:[{ \"source\": 0, \"target\": 1, \"relation\": \"老师\" }] \r\n *                  }\r\n * height  设置高度\r\n * width   设置宽度\r\n * className  设置组件class样式\r\n * \r\n */\r\nclass PeopleRelation extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            relationsId: 'relationsId',\r\n        }\r\n    }\r\n\r\n    initData = (relationInfo) => {\r\n        if(!relationInfo || !relationInfo.nodes || !relationInfo.edges){\r\n            return;\r\n        }\r\n        let newNodes = [];\r\n        relationInfo.nodes.forEach((unit) => {\r\n            if (unit.role === \"boy\") {\r\n                unit.image = boy;\r\n                newNodes.push(unit);\r\n            } else if (unit.role === \"girl\") {\r\n                unit.image = girl;\r\n                newNodes.push(unit);\r\n            } else if (unit.role === \"male\") {\r\n                unit.image = male;\r\n                newNodes.push(unit);\r\n            } else if (unit.role === \"female\") {\r\n                unit.image = female;\r\n                newNodes.push(unit);\r\n            }\r\n        })\r\n        this.setRelationshipUI({\r\n            nodes: newNodes,\r\n            edges: relationInfo.edges\r\n        });\r\n    }\r\n\r\n    setRelationshipUI = (data) => {\r\n        const showWith = this.props.width || document.getElementById(\"root\").clientWidth - 315;\r\n        const {nodes, edges} = data;\r\n        const relationsId = this.state.relationsId;\r\n        let width = showWith;//设置宽度\r\n        let height = this.props.height ||  800;//设置高度\r\n        let img_w = 20;\r\n        let img_h = 20;\r\n        let radius = 20;    //圆形半径\r\n\r\n        let svg = d3.select(\"#\" + relationsId).append(\"svg\")\r\n            .attr(\"width\", width)\r\n            .attr(\"height\", height);\r\n\r\n        //D3力导向布局\r\n        let force = d3.layout.force()\r\n            .nodes(nodes)  //指定节点数组\r\n            .links(edges)  //指定连线数据\r\n            .size([width, height])  //指定作用域范围\r\n            .linkDistance(200)  //指定连线长度\r\n            .charge(-1500)  //相互之间的作用力\r\n            .start();  //开始作用\r\n\r\n\r\n        //边（添加连线）\r\n        let edges_line = svg.selectAll(\"line\")\r\n            .data(edges)\r\n            .enter()\r\n            .append(\"line\")\r\n            .style(\"stroke\", \"#ccc\")\r\n            .style(\"stroke-width\", 1);\r\n\r\n        //边上的文字（人物之间的关系）\r\n        let edges_text = svg.selectAll(\".linetext\")\r\n            .data(edges)\r\n            .enter()\r\n            .append(\"text\")\r\n            .attr(\"class\", \"linetext\")\r\n            .attr(\"style\", \"font-size: 12px\")\r\n            .text(function (d) {\r\n                return d.relation;\r\n            });\r\n\r\n\r\n        // 圆形图片节点（人物头像）\r\n        let nodes_img = svg.selectAll(\"image\")\r\n            .data(nodes)\r\n            .enter()\r\n            .append(\"circle\")\r\n            .attr(\"class\", \"circleImg\")\r\n            .attr(\"r\", radius)\r\n            .attr(\"fill\", function (d, i) {\r\n                //创建圆形图片\r\n                let defs = svg.append(\"defs\").attr(\"id\", \"imgdefs\")\r\n                let catpattern = defs.append(\"pattern\")\r\n                    .attr(\"id\", \"catpattern\" + i)\r\n                    .attr(\"height\", 1)\r\n                    .attr(\"width\", 1)\r\n                catpattern.append(\"image\")\r\n                    .attr(\"x\", -(img_w / 2 - radius))\r\n                    .attr(\"y\", -(img_h / 2 - radius))\r\n                    .attr(\"width\", img_w)\r\n                    .attr(\"height\", img_h)\r\n                    .attr(\"xlink:href\", d.image)\r\n                return \"url(#catpattern\" + i + \")\";\r\n            }).call(force.drag);\r\n\r\n\r\n        let text_dx = -20;\r\n        let text_dy = 20;\r\n\r\n        let nodes_text = svg.selectAll(\".nodetext\")\r\n            .data(nodes)\r\n            .enter()\r\n            .append(\"text\")\r\n            .attr(\"class\", \"nodetext\")\r\n            .attr(\"dx\", text_dx)\r\n            .attr(\"dy\", text_dy)\r\n            .text(function (d) {\r\n                return d.name;\r\n            });\r\n\r\n\r\n        force.on(\"tick\", function () {\r\n            //限制结点的边界\r\n            nodes.forEach(function (d, i) {\r\n                // console.log('nodes');\r\n                d.x = d.x - img_w / 2 < 0 ? img_w / 2 : d.x;\r\n                d.x = d.x + img_w / 2 > width ? width - img_w / 2 : d.x;\r\n                d.y = d.y - img_h / 2 < 0 ? img_h / 2 : d.y;\r\n                d.y = d.y + img_h / 2 + text_dy > height ? height - img_h / 2 - text_dy : d.y;\r\n            });\r\n\r\n            //更新连接线的位置\r\n            edges_line.attr(\"x1\", function (d) {\r\n                return d.source.x;\r\n            });\r\n            edges_line.attr(\"y1\", function (d) {\r\n                return d.source.y;\r\n            });\r\n            edges_line.attr(\"x2\", function (d) {\r\n                return d.target.x;\r\n            });\r\n            edges_line.attr(\"y2\", function (d) {\r\n                return d.target.y;\r\n            });\r\n\r\n            //更新连接线上文字的位置\r\n            edges_text.attr(\"x\", function (d) {\r\n                return (d.source.x + d.target.x) / 2;\r\n            });\r\n            edges_text.attr(\"y\", function (d) {\r\n                return (d.source.y + d.target.y) / 2;\r\n            });\r\n\r\n\r\n            //更新结点图片和文字\r\n            nodes_img.attr(\"cx\", function (d) {\r\n                return d.x\r\n            });\r\n            nodes_img.attr(\"cy\", function (d) {\r\n                return d.y\r\n            });\r\n\r\n            nodes_text.attr(\"x\", function (d) {\r\n                return d.x\r\n            });\r\n            nodes_text.attr(\"y\", function (d) {\r\n                return d.y + img_w / 2;\r\n            });\r\n        });\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.data && !isObjectValueEqual(nextProps.data,this.props.data)) {\r\n            setTimeout(() => {\r\n                this.initData(nextProps.data)\r\n            },50)\r\n        }\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        if (isObjectValueEqual(nextProps.data,this.props.data)) {\r\n            return false;\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        if(this.props.data && this.props.data.nodes.length > 0 && this.props.data.edges.length > 0){\r\n            this.initData(this.props.data)\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (!this.props.data || this.props.data.nodes.length <= 0 || this.props.data.edges.length <= 0) {\r\n\t\t\treturn (\r\n                <div style={{ backgroundColor: '#fff' }}><NoData data={'nodata'} height={this.props.height}/></div>\r\n            )\r\n\t\t} else{\r\n\t\t\treturn (\r\n\t\t\t\t<div id={this.state.relationsId} className={this.props.className}></div>\r\n\t\t\t)\r\n\t\t}\r\n    }\r\n}\r\n\r\nexport default PeopleRelation;\r\n\r\n// 数据格式\r\n// const relationInfo = {\r\n//     \"nodes\": [\r\n//         { \"image\": \"\", \"role\": \"female\", \"name\": \"吴智蕾\" },\r\n//         { \"image\": \"\", \"role\": \"male\", \"name\": \"季刚波\" },\r\n//         { \"image\": \"\", \"role\": \"male\", \"name\": \"傅欣\" },\r\n//         { \"image\": \"\", \"role\": \"female\", \"name\": \"王潘潘\" },\r\n//         { \"image\": \"\", \"role\": \"female\", \"name\": \"张旭\" },\r\n//         { \"image\": \"\", \"role\": \"male\", \"name\": \"赵海晶\" }\r\n//     ],\r\n//     \"edges\": [\r\n//         { \"source\": 0, \"target\": 1, \"relation\": \"老师\" },\r\n//         { \"source\": 0, \"target\": 2, \"relation\": \"老师\" },\r\n//         { \"source\": 0, \"target\": 3, \"relation\": \"老师\" },\r\n//         { \"source\": 0, \"target\": 4, \"relation\": \"老师\" },\r\n//         { \"source\": 0, \"target\": 5, \"relation\": \"老师\" }\r\n//     ]\r\n// }","import React, { Component } from 'react';\r\nimport { Breadcrumb, Card } from 'antd';\r\nimport PeopleRelation from '../../../common/components/D3/PeopleRelation';\r\n\r\nclass Relation extends Component {\r\n    render() {\r\n        const relationInfo = {\r\n            \"nodes\": [\r\n                { \"image\": \"\", \"role\": \"female\", \"name\": \"吴智蕾\" },\r\n                { \"image\": \"\", \"role\": \"male\", \"name\": \"季刚波\" },\r\n                { \"image\": \"\", \"role\": \"male\", \"name\": \"傅欣\" },\r\n                { \"image\": \"\", \"role\": \"female\", \"name\": \"王潘潘\" },\r\n                { \"image\": \"\", \"role\": \"female\", \"name\": \"张旭\" },\r\n                { \"image\": \"\", \"role\": \"male\", \"name\": \"赵海晶\" }\r\n            ],\r\n            \"edges\": [\r\n                { \"source\": 0, \"target\": 1, \"relation\": \"老师\" },\r\n                { \"source\": 0, \"target\": 2, \"relation\": \"老师\" },\r\n                { \"source\": 0, \"target\": 3, \"relation\": \"老师\" },\r\n                { \"source\": 0, \"target\": 4, \"relation\": \"老师\" },\r\n                { \"source\": 0, \"target\": 5, \"relation\": \"老师\" }\r\n            ]\r\n        };\r\n        return (\r\n            <div>\r\n                <Breadcrumb  className=\"breadcrumb\">\r\n                    <Breadcrumb.Item>Dashboard</Breadcrumb.Item>\r\n                    <Breadcrumb.Item>关系页</Breadcrumb.Item>\r\n                </Breadcrumb>\r\n                <div className=\"common-content\">\r\n                    <Card title=\"D3关系图\">\r\n                        <PeopleRelation\r\n                            height={500}\r\n                            data={relationInfo}\r\n                        />\r\n                    </Card>\r\n                </div>\r\n            </div>\r\n            \r\n        )\r\n    }\r\n}\r\n\r\nexport default Relation;","module.exports = __webpack_public_path__ + \"static/media/boy.d0fc2f12.png\";","module.exports = __webpack_public_path__ + \"static/media/girl.42daa9d3.png\";","module.exports = __webpack_public_path__ + \"static/media/male.e96181b6.png\";","module.exports = __webpack_public_path__ + \"static/media/female.6c82a58d.png\";"],"sourceRoot":""}